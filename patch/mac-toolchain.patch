diff -Naur qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/common/clang-mac-llvm6.0.0.conf Qt5--qtbase/qtbase/mkspecs/common/clang-mac-llvm6.0.0.conf
--- qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/common/clang-mac-llvm6.0.0.conf	1970-01-01 01:00:00.000000000 +0100
+++ Qt5--qtbase/qtbase/mkspecs/common/clang-mac-llvm6.0.0.conf	2018-06-29 00:38:41.000000000 +0200
@@ -0,0 +1,11 @@
+
+QMAKE_OBJCFLAGS_PRECOMPILE       = -x objective-c-header -c ${QMAKE_PCH_INPUT} -o ${QMAKE_PCH_OUTPUT}
+QMAKE_OBJCFLAGS_USE_PRECOMPILE   = $$QMAKE_CFLAGS_USE_PRECOMPILE
+QMAKE_OBJCXXFLAGS_PRECOMPILE     = -x objective-c++-header -c ${QMAKE_PCH_INPUT} -o ${QMAKE_PCH_OUTPUT}
+QMAKE_OBJCXXFLAGS_USE_PRECOMPILE = $$QMAKE_CFLAGS_USE_PRECOMPILE
+
+QMAKE_XCODE_GCC_VERSION = com.apple.compilers.llvm.clang.1_0
+QMAKE_MAC_TOOLCHAIN = LLVM6.0.0
+
+QMAKE_CXXFLAGS += -stdlib=libc++
+QMAKE_LFLAGS   += -stdlib=libc++
diff -Naur qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/common/clang-mac.conf Qt5--qtbase/qtbase/mkspecs/common/clang-mac.conf
--- qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/common/clang-mac.conf	2016-12-01 09:17:04.000000000 +0100
+++ Qt5--qtbase/qtbase/mkspecs/common/clang-mac.conf	2018-06-29 00:38:25.000000000 +0200
@@ -5,6 +5,7 @@
 QMAKE_OBJCXXFLAGS_USE_PRECOMPILE = $$QMAKE_CFLAGS_USE_PRECOMPILE
 
 QMAKE_XCODE_GCC_VERSION = com.apple.compilers.llvm.clang.1_0
+QMAKE_MAC_TOOLCHAIN = XcodeDefault 
 
 QMAKE_CXXFLAGS += -stdlib=libc++
 QMAKE_LFLAGS   += -stdlib=libc++
diff -Naur qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/features/mac/sdk.prf Qt5--qtbase/qtbase/mkspecs/features/mac/sdk.prf
--- qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/features/mac/sdk.prf	2016-12-01 09:17:04.000000000 +0100
+++ Qt5--qtbase/qtbase/mkspecs/features/mac/sdk.prf	2018-06-29 00:30:31.000000000 +0200
@@ -47,7 +47,7 @@
     value = $$eval($$tool)
     isEmpty(value): next()
 
-    sysrooted = $$system("/usr/bin/xcrun -sdk $$QMAKE_MAC_SDK -find $$first(value) 2>/dev/null")
+    sysrooted = $$system("/usr/bin/xcrun -sdk $$QMAKE_MAC_SDK --toolchain $$QMAKE_MAC_TOOLCHAIN -find $$first(value) 2>/dev/null")
     isEmpty(sysrooted): next()
 
     $$tool = $$sysrooted $$member(value, 1, -1)
diff -Naur qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.app Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.app
--- qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.app	1970-01-01 01:00:00.000000000 +0100
+++ Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.app	2018-06-29 00:42:11.000000000 +0200
@@ -0,0 +1,22 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
+<plist version="1.0">
+<dict>
+	<key>NSPrincipalClass</key>
+	<string>NSApplication</string>
+	<key>CFBundleIconFile</key>
+	<string>@ICON@</string>
+	<key>CFBundlePackageType</key>
+	<string>APPL</string>
+	<key>CFBundleGetInfoString</key>
+	<string>Created by Qt/QMake</string>
+	<key>CFBundleSignature</key>
+	<string>@TYPEINFO@</string>
+	<key>CFBundleExecutable</key>
+	<string>@EXECUTABLE@</string>
+	<key>CFBundleIdentifier</key>
+	<string>@BUNDLEIDENTIFIER@</string>
+	<key>NOTE</key>
+	<string>This file was generated by Qt/QMake.</string>
+</dict>
+</plist>
diff -Naur qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.dSYM.in Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.dSYM.in
--- qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.dSYM.in	1970-01-01 01:00:00.000000000 +0100
+++ Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.dSYM.in	2018-06-29 00:42:11.000000000 +0200
@@ -0,0 +1,18 @@
+<?xml version=\"1.0\" encoding=\"UTF-8\"?>
+<!DOCTYPE plist PUBLIC \"-//Apple Computer//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">
+<plist version=\"1.0\">
+	<dict>
+		<key>CFBundleIdentifier</key>
+		<string>com.apple.xcode.dsym.$${BUNDLEIDENTIFIER}</string>
+		<key>CFBundlePackageType</key>
+		<string>dSYM</string>
+		<key>CFBundleSignature</key>
+		<string>????</string>
+!!IF !isEmpty(VERSION)
+		<key>CFBundleShortVersionString</key>
+		<string>$${VER_MAJ}.$${VER_MIN}</string>
+		<key>CFBundleVersion</key>
+		<string>$${VER_MAJ}.$${VER_MIN}.$${VER_PAT}</string>
+!!ENDIF
+	</dict>
+</plist>
diff -Naur qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.lib Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.lib
--- qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.lib	1970-01-01 01:00:00.000000000 +0100
+++ Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/Info.plist.lib	2018-06-29 00:42:11.000000000 +0200
@@ -0,0 +1,22 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
+<plist version="1.0">
+<dict>
+	<key>CFBundlePackageType</key>
+	<string>FMWK</string>
+	<key>CFBundleShortVersionString</key>
+	<string>@SHORT_VERSION@</string>
+	<key>CFBundleVersion</key>
+	<string>@FULL_VERSION@</string>
+	<key>CFBundleGetInfoString</key>
+	<string>Created by Qt/QMake</string>
+	<key>CFBundleSignature</key>
+	<string>@TYPEINFO@</string>
+	<key>CFBundleExecutable</key>
+	<string>@LIBRARY@</string>
+	<key>CFBundleIdentifier</key>
+	<string>@BUNDLEIDENTIFIER@</string>
+	<key>NOTE</key>
+	<string>Please, do NOT change this file -- It was generated by Qt/QMake.</string>
+</dict>
+</plist>
diff -Naur qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/qmake.conf Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/qmake.conf
--- qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/qmake.conf	1970-01-01 01:00:00.000000000 +0100
+++ Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/qmake.conf	2018-06-29 00:42:43.000000000 +0200
@@ -0,0 +1,16 @@
+#
+# qmake configuration for Clang on OS X
+#
+
+MAKEFILE_GENERATOR      = UNIX
+CONFIG                 += app_bundle incremental global_init_link_order lib_version_first
+QMAKE_INCREMENTAL_STYLE = sublib
+
+include(../common/macx.conf)
+include(../common/gcc-base-mac.conf)
+include(../common/clang.conf)
+include(../common/clang-mac-llvm6.0.0.conf)
+
+QMAKE_MACOSX_DEPLOYMENT_TARGET = 10.8
+
+load(qt_config)
diff -Naur qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/qplatformdefs.h Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/qplatformdefs.h
--- qt-everywhere-opensource-src-5.7.1/qtbase/mkspecs/macx-clang-llvm6.0.0/qplatformdefs.h	1970-01-01 01:00:00.000000000 +0100
+++ Qt5--qtbase/qtbase/mkspecs/macx-clang-llvm6.0.0/qplatformdefs.h	2018-06-29 00:42:11.000000000 +0200
@@ -0,0 +1,41 @@
+/****************************************************************************
+**
+** Copyright (C) 2016 The Qt Company Ltd.
+** Contact: https://www.qt.io/licensing/
+**
+** This file is part of the qmake spec of the Qt Toolkit.
+**
+** $QT_BEGIN_LICENSE:LGPL$
+** Commercial License Usage
+** Licensees holding valid commercial Qt licenses may use this file in
+** accordance with the commercial license agreement provided with the
+** Software or, alternatively, in accordance with the terms contained in
+** a written agreement between you and The Qt Company. For licensing terms
+** and conditions see https://www.qt.io/terms-conditions. For further
+** information use the contact form at https://www.qt.io/contact-us.
+**
+** GNU Lesser General Public License Usage
+** Alternatively, this file may be used under the terms of the GNU Lesser
+** General Public License version 3 as published by the Free Software
+** Foundation and appearing in the file LICENSE.LGPL3 included in the
+** packaging of this file. Please review the following information to
+** ensure the GNU Lesser General Public License version 3 requirements
+** will be met: https://www.gnu.org/licenses/lgpl-3.0.html.
+**
+** GNU General Public License Usage
+** Alternatively, this file may be used under the terms of the GNU
+** General Public License version 2.0 or (at your option) the GNU General
+** Public license version 3 or any later version approved by the KDE Free
+** Qt Foundation. The licenses are as published by the Free Software
+** Foundation and appearing in the file LICENSE.GPL2 and LICENSE.GPL3
+** included in the packaging of this file. Please review the following
+** information to ensure the GNU General Public License requirements will
+** be met: https://www.gnu.org/licenses/gpl-2.0.html and
+** https://www.gnu.org/licenses/gpl-3.0.html.
+**
+** $QT_END_LICENSE$
+**
+****************************************************************************/
+
+#include "../common/mac/qplatformdefs.h"
+
